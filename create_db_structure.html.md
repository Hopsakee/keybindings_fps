# create database


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Initialize database

------------------------------------------------------------------------

<a
href="https://github.com/Hopsakee/keybindings_fps/blob/main/keybindings_fps/create_db_structure.py#L17"
target="_blank" style="float:right; font-size:smaller">source</a>

### init_db

>  init_db (data_dir:pathlib.Path=None)

*Initialize the database connection Args: data_dir: Optional path to
data directory. If None, uses projectâ€™s data dir*

``` python
db = init_db()
```

``` python
db.t.actions()[0].keys()
```

    dict_keys(['id', 'name', 'description', 'category_id'])

# Create the tables

------------------------------------------------------------------------

<a
href="https://github.com/Hopsakee/keybindings_fps/blob/main/keybindings_fps/create_db_structure.py#L29"
target="_blank" style="float:right; font-size:smaller">source</a>

### create_tables

>  create_tables (db:<function database>, overwrite_existing:bool=False)

*Create all required database tables.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>db</td>
<td>database</td>
<td></td>
<td>Database connection</td>
</tr>
<tr>
<td>overwrite_existing</td>
<td>bool</td>
<td>False</td>
<td>Remove all existing data in database</td>
</tr>
</tbody>
</table>

### Open existing database in project data directory

``` python
db = init_db()
```

Check that the database is opened in the correct location

``` python
db.conn.filename
```

    '/home/jelle/code/keybindings_fps/data/game_bindings.db'

## Modify structure of database tables

#### Add a new column to an existing table

------------------------------------------------------------------------

<a
href="https://github.com/Hopsakee/keybindings_fps/blob/main/keybindings_fps/create_db_structure.py#L121"
target="_blank" style="float:right; font-size:smaller">source</a>

### add_clmn_to_table

>  add_clmn_to_table (db, table, column, col_type, **kwargs)

*Add a new column to an existing table*

``` python
db.t['bindings'].c
```

    action_id, description, game_id, id, key_id, modifier_id, sort_order

``` python
add_clmn_to_table(db, 'bindings', 'test', str, not_null_default='test text')
```

    <Table bindings (id, game_id, action_id, key_id, modifier_id, description, sort_order, test)>

``` python
test_eq(db.t['bindings'].columns[-1].name, 'test')
```

#### Delete/drop a column from an existing table

------------------------------------------------------------------------

<a
href="https://github.com/Hopsakee/keybindings_fps/blob/main/keybindings_fps/create_db_structure.py#L129"
target="_blank" style="float:right; font-size:smaller">source</a>

### drop_clmn_from_table

>  drop_clmn_from_table (db, table, column)

*Drop a column from an existing table*

``` python
drop_clmn_from_table(db, 'bindings', 'test')
```

    <Table bindings (id, game_id, action_id, key_id, modifier_id, description, sort_order)>

``` python
test_eq('test' not in db.t['bindings'].c, True)
```

``` python
db.conn.close()
```
